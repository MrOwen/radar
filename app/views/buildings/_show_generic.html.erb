<div id="<%= "building_#{building.id}_div" %>">
  <%= form_for(building, :remote=>true) do |f| %>
    <table width="100%">
      <tr <%= row_style %> id="<%= "building_#{building.id}_row" %>" valign="bottom">
        <td style="width:25%"><%=h building.name %><div style="display:none;">
            <hr />
            <%= f.text_field :name, :size => 25 %>
          </div></td>
        <td style="width:10%"><%=h building.abbreviation %><div style="display:none;">
            <hr />
            <%= f.text_field :abbreviation, :size => 5 %>
          </div></td>
        <td style="width:10%" align="center">
          <%= image_tag( "check_mark.jpg", :height=>16, :width=> 16) if building.is_residence %>
          <div style="display:none;">
            <hr />
            <%= f.check_box :is_residence %>
          </div>
        </td>
        <% area = Area.where(:id =>building.area_id.to_i).first %>
        <td style="width:25%"><%= area.name rescue "Unspecified" %>
          <div style="display:none;">
            <hr />
            <% areas = Area.all %>
            <% area_id = building.area_id %>
            <% if area_id == nil %>
              <% area_id = Building.unspecified_id %>
            <% end %>
            <%= f.select "area_id", options_from_collection_for_select(areas, "id", "name", "#{area_id}") %>
          </div></td>
        <td><%= link_to 'Edit', "javascript:void(0)",
            :onclick => "rowToggle('building_#{building.id}_row');" if can? :edit, building %>
          <div class="actions" style="display:none;">
            <br />
            <%= hidden_field :row, :style, {:value=>row_style}  %>
            <%= f.submit "Save" %><%=  button_to_function "Cancel", "rowToggle('building_#{building.id}_row')" %>
          </div></td>
        <td valign="middle"><%= link_to 'Destroy', building, :confirm => 'Are you sure?', :method => :delete, :id => building if can? :destroy, building %></td>
      </tr>
    </table>
  <% end %>
</div>