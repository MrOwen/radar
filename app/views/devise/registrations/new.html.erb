<script>
function type(obj){
    return Object.prototype.toString.call(obj).match(/^\[object (.*)\]$/)[1]
}

function validate(e) { 
  var boxes = $$('#staff_org_');
  var checked_count = 0;

  for (i =0; i < boxes.size(); i++) {
       if (boxes[i].checked) {
         checked_count++;
       }
  }
  if (checked_count < 1) {
       $$('label[for="staff_org_"]')[0].setStyle({ display:'block', fontSize:'10px', color:'#aa0000'  } );
       e.stop();
  }
}
Event.observe(window, 'load', function() {
   Event.observe('staff_new', 'submit', validate);
});

</script>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :onSubmit=>"validate(this);" ) do |f| %>
  <%= devise_error_messages! %>
<div class="form_header"><%= t :new_staff %></div>
<%= hidden_field_tag "staff[active]",  "true" %>
  <div class="field">
    <%= f.label :first_name %><br />
    <%= f.text_field :first_name %>
  </div>
  <div class="field">
    <%= f.label :last_name %><br />
    <%= f.text_field :last_name %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :password %><br />
    <%= f.password_field :password %>
  </div>
  <div class="field">
    <%= render :partial => "devise/registrations/authorization_select", :locals=> { :staff => @staff } %>
  </div>
  
  <% if can? :assign, Area %>
  <div class="field">
    <%= f.label :area %><br />
    <%= f.collection_select( :staff_areas, Area.order(:name), :id, :name, {:selected => 1}) %>
  </div>
  <% end %>
  <br />
  <div class="actions">
    <%= f.submit %>
  </div>
  <br />
<% end %>

<%= render :partial => "devise/shared/links" %>
