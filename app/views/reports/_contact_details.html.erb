<%= link_to image_tag("/images/add_icon.gif", :id => "#{participant.id}_#{reason.id}-annotation_img"), "javascript:void(0)",  
  :onclick => "plusMinusToggle('contact_details_#{participant.id}_#{reason.id}', '#{participant.id}_#{reason.id}-annotation_img');" %>
<b><%= "Details" %></b></br>
<div id="contact_details_<%= participant.id %>_<%= reason.id %>" class="participant_detail">
  <div style="margin-left: 15px;">
    <% rf =  remote_function( :update => nil,
							:url => { :controller => 'reports', :action => :update_annotation },
							:with => "'participant=#{participant.id}&reason=#{reason.id}" + '&text=\' + this.value')  %>
    <% rf2 =  remote_function( :update => nil,
							:url => { :controller => 'reports', :action => :update_duration },
							:with => "'participant=#{participant.id}&reason=#{reason.id}" + '&text=\' + this.value')  %>
    <%= "Comment" %><br />
    <%= text_area_tag "annotation_#{participant.id}_#{reason.id}", (participant_reason.nil? ? "" : participant_reason.comment), :cols => 60, :rows => 2, :onblur => "#{rf}" %>
    <br />
    <%= "Duration (minutes)" %><br />
    <%= text_field_tag "duration_#{participant.id}_#{reason.id}", 
	      (participant_reason.nil? ? "" : participant_reason.contact_duration), 
	      :id=>"duration_#{participant.id}_#{reason.id}" , 
		  :onblur=> "#{rf2}" %>
  </div>
</div>

<script type="text/javascript">
        AnyTime.picker( "duration_<%= participant.id %>_<%= reason.id %>",
            { format: "%k hour(s) %i min" } );
</script>